
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module equivalence2</title>
<meta name="description" content="Documentation of Coq module equivalence2" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module equivalence2</h1>
<div class="coq">
<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html">Logic.FunctionalExtensionality</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith.html">ZArith</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.micromega.Lia.html">Lia</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html">Values</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html">Memory</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memdata.html">Memdata</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">bpf.comm</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="bpf.comm.State.html">State</a></span> <span class="id"><a href="bpf.comm.Monad.html">Monad</a></span> <span class="id"><a href="bpf.comm.rBPFMonadOp.html">rBPFMonadOp</a></span>.<br/>
<span class="kwd">From</span> <span class="id">bpf.dxmodel</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="bpf.dxmodel.DxInstructions.html">DxInstructions</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">bpf.monadicmodel</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="bpf.monadicmodel.Opcode.html">Opcode</a></span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html">rBPFInterpreter</a></span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">unfold_monad</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.comm.Monad.html#bindM">bindM</a></span>, <span class="id"><a href="bpf.comm.Monad.html#returnM">returnM</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">unfold_dx_type</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.dxmodel.DxMonad.html#bindM">DxMonad.bindM</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#upd_reg">DxMonad.upd_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_flag">DxMonad.eval_flag</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_reg">DxMonad.eval_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#returnM">DxMonad.returnM</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_ins_len">DxMonad.eval_ins_len</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_pc">DxMonad.eval_pc</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#upd_pc_incr">DxMonad.upd_pc_incr</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#upd_flag">DxMonad.upd_flag</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_ins">DxMonad.eval_ins</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.comm.BinrBPF.html#get_opcode">BinrBPF.get_opcode</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.dxcomm.DxIntegers.html#sint32_t">DxIntegers.sint32_t</a></span>, <span class="id"><a href="bpf.dxcomm.DxIntegers.html#int64_t">DxIntegers.int64_t</a></span>, <span class="id">DxNat.nat8</span>, <span class="id"><a href="bpf.dxcomm.DxValues.html#val64_t">DxValues.val64_t</a></span>, <span class="id"><a href="bpf.dxcomm.DxValues.html#valu32_t">DxValues.valu32_t</a></span>, <span class="id"><a href="bpf.dxcomm.DxValues.html#vals32_t">DxValues.vals32_t</a></span>;<br/>
&nbsp;&nbsp;<span class="id">unfold_monad</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">unfold_dx_name</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">DxNat.nat8_zero</span>, <span class="id">DxNat.nat8_0x08</span>, <span class="id">DxNat.nat8_0x07</span>, <span class="id"><a href="bpf.dxcomm.DxIntegers.html#int64_0xff">DxIntegers.int64_0xff</a></span>, <span class="id"><a href="bpf.dxcomm.DxIntegers.html#int64_32">DxIntegers.int64_32</a></span>, <span class="id">DxNat.nat8_0xf0</span>, <span class="id"><a href="bpf.dxcomm.DxIntegers.html#int64_64">DxIntegers.int64_64</a></span>, <span class="id"><a href="bpf.dxcomm.DxValues.html#val32_64">DxValues.val32_64</a></span>, <span class="id"><a href="bpf.dxcomm.DxIntegers.html#int64_48">DxIntegers.int64_48</a></span>, <span class="id">DxNat.nat8_0xff</span>, <span class="id"><a href="bpf.dxcomm.DxValues.html#val64_zero">DxValues.val64_zero</a></span>, <span class="id"><a href="bpf.comm.Regs.html#val64_zero">Regs.val64_zero</a></span>, <span class="id"><a href="bpf.dxcomm.DxIntegers.html#int32_0">DxIntegers.int32_0</a></span>, <span class="id"><a href="bpf.dxcomm.DxIntegers.html#int32_64">DxIntegers.int32_64</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">unfold_dx</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_opcode_ins">get_opcode_ins</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_opcode">get_opcode</a></span>, <span class="id"><a href="bpf.monadicmodel.Opcode.html#byte_to_opcode">Opcode.byte_to_opcode</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_dx_name</span>; <span class="id">unfold_dx_type</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">destruct_if_reflexivity</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- <span class="id">context</span>[(<span class="kwd">if</span> ?<span class="id">X</span> <span class="kwd">then</span> <span class="id">_</span> <span class="kwd">else</span> <span class="id">_</span>) ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">X</span>; [| <span class="tactic">reflexivity</span>]<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">Z_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="equivalence_between_coq_and_dx_step">equivalence_between_coq_and_dx_step</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="bpf.dxmodel.DxInstructions.html#step">DxInstructions.step</a></span> = <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#step">rBPFInterpreter.step</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#step">rBPFInterpreter.step</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#step">DxInstructions.step</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html#functional_extensionality">functional_extensionality</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_opcode_ins">DxInstructions.get_opcode_ins</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_opcode">DxInstructions.get_opcode</a></span>, <span class="id"><a href="bpf.comm.rBPFMonadOp.html#eval_pc">eval_pc</a></span>, <span class="id"><a href="bpf.comm.rBPFMonadOp.html#eval_ins">eval_ins</a></span>.<br/>
&nbsp;&nbsp;<span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_dst">DxInstructions.get_dst</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_src64">DxInstructions.get_src64</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_src32">DxInstructions.get_src32</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_immediate">DxInstructions.get_immediate</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#eval_immediate">DxInstructions.eval_immediate</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#step_opcode_alu64">DxInstructions.step_opcode_alu64</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_src">DxInstructions.get_src</a></span>; <span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_dst">get_dst</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#step_opcode_mem_ld_imm">DxInstructions.step_opcode_mem_ld_imm</a></span>; <span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_opcode_mem_ld_imm">DxInstructions.get_opcode_mem_ld_imm</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_immediate">DxInstructions.get_immediate</a></span>; <span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.dxmodel.DxMonad.html#int64_to_dst_reg">DxMonad.int64_to_dst_reg</a></span>, <span class="id">DxNat.nat2int</span>, <span class="id"><a href="bpf.dxcomm.DxIntegers.html#int32_8">DxIntegers.int32_8</a></span>, <span class="id"><a href="bpf.dxcomm.DxValues.html#Val_ulongofslong">DxValues.Val_ulongofslong</a></span>, <span class="id"><a href="bpf.dxcomm.DxValues.html#Val_slongofint">DxValues.Val_slongofint</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#int64_to_src_reg">DxMonad.int64_to_src_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_opcode_alu64">DxInstructions.get_opcode_alu64</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#reg64_to_reg32">DxInstructions.reg64_to_reg32</a></span>, <span class="id">DxNat.nat8_0x87</span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#step_opcode_alu32">DxInstructions.step_opcode_alu32</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_offset">DxInstructions.get_offset</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#step_opcode_branch">DxInstructions.step_opcode_branch</a></span>, <span class="id"><a href="bpf.dxcomm.DxIntegers.html#int32_1">DxIntegers.int32_1</a></span>, <span class="id"><a href="bpf.dxcomm.DxIntegers.html#int32_32">DxIntegers.int32_32</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#step_opcode_mem_ld_reg">DxInstructions.step_opcode_mem_ld_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#step_opcode_mem_ld_imm">DxInstructions.step_opcode_mem_ld_imm</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#step_opcode_mem_st_reg">DxInstructions.step_opcode_mem_st_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#step_opcode_mem_st_imm">DxInstructions.step_opcode_mem_st_imm</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_addr_ofs">DxInstructions.get_addr_ofs</a></span>.<br/>
&nbsp;&nbsp;<span class="id">destruct_if_reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.comm.rBPFMonadOp.html#int64_to_dst_reg">int64_to_dst_reg</a></span>; [| <span class="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="kwd">match</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.land">Nat.land</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int64.unsigned">Int64.unsigned</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int64.and">Int64.and</a></span> (<span class="id"><a href="bpf.comm.State.html#eval_ins">State.eval_ins</a></span> (<span class="id"><a href="bpf.comm.State.html#eval_pc">State.eval_pc</a></span> <span class="id">x</span>) <span class="id">x</span>) (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> 255))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7<br/>
&nbsp;&nbsp;<span class="kwd">with</span><br/>
&nbsp;&nbsp;| 0%<span class="id">nat</span> =&gt; <span class="id"><a href="bpf.monadicmodel.Opcode.html#op_BPF_Mem_ld_imm">op_BPF_Mem_ld_imm</a></span><br/>
&nbsp;&nbsp;| 1%<span class="id">nat</span> =&gt; <span class="id"><a href="bpf.monadicmodel.Opcode.html#op_BPF_Mem_ld_reg">op_BPF_Mem_ld_reg</a></span><br/>
&nbsp;&nbsp;| 2%<span class="id">nat</span> =&gt; <span class="id"><a href="bpf.monadicmodel.Opcode.html#op_BPF_Mem_st_imm">op_BPF_Mem_st_imm</a></span><br/>
&nbsp;&nbsp;| 3%<span class="id">nat</span> =&gt; <span class="id"><a href="bpf.monadicmodel.Opcode.html#op_BPF_Mem_st_reg">op_BPF_Mem_st_reg</a></span><br/>
&nbsp;&nbsp;| 4%<span class="id">nat</span> =&gt; <span class="id"><a href="bpf.monadicmodel.Opcode.html#op_BPF_ALU32">op_BPF_ALU32</a></span><br/>
&nbsp;&nbsp;| 5%<span class="id">nat</span> =&gt; <span class="id"><a href="bpf.monadicmodel.Opcode.html#op_BPF_Branch">op_BPF_Branch</a></span><br/>
&nbsp;&nbsp;| 7%<span class="id">nat</span> =&gt; <span class="id"><a href="bpf.monadicmodel.Opcode.html#op_BPF_ALU64">op_BPF_ALU64</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="bpf.monadicmodel.Opcode.html#op_BPF_ILLEGAL_INS">op_BPF_ILLEGAL_INS</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>) <span class="id">eqn</span>: <span class="id">Hopcode</span>; <span class="tactic">unfold</span> <span class="id"><a href="bpf.comm.rBPFMonadOp.html#eval_reg">eval_reg</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_src64">get_src64</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_src32">get_src32</a></span>; <span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct_if_reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#step_opcode_alu64">step_opcode_alu64</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_opcode_alu64">get_opcode_alu64</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_immediate">get_immediate</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#eval_immediate">eval_immediate</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#reg64_to_reg32">reg64_to_reg32</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.comm.rBPFValues.html#sint32_to_vint">rBPFValues.sint32_to_vint</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.monadicmodel.Opcode.html#byte_to_opcode_alu64">byte_to_opcode_alu64</a></span>; <span class="tactic">try</span> <span class="id">destruct_if_reflexivity</span>; <span class="tactic">try</span>(<span class="tactic">destruct</span> <span class="id"><a href="bpf.comm.rBPFMonadOp.html#upd_reg">upd_reg</a></span>; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct_if_reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_opcode_alu32">DxInstructions.get_opcode_alu32</a></span>, <span class="id"><a href="bpf.dxcomm.DxValues.html#val32_zero">DxValues.val32_zero</a></span>, <span class="id"><a href="bpf.dxcomm.DxValues.html#val32_32">DxValues.val32_32</a></span>, <span class="id">DxNat.nat8_0x84</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#reg64_to_reg32">reg64_to_reg32</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_immediate">get_immediate</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#step_opcode_alu32">step_opcode_alu32</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_opcode_alu32">get_opcode_alu32</a></span>, <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vzero">Vzero</a></span>, <span class="id"><a href="bpf.dxcomm.DxIntegers.html#int32_32">DxIntegers.int32_32</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.comm.rBPFValues.html#sint32_to_vint">rBPFValues.sint32_to_vint</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.monadicmodel.Opcode.html#byte_to_opcode_alu32">byte_to_opcode_alu32</a></span>; <span class="tactic">try</span> <span class="id">destruct_if_reflexivity</span>; <span class="tactic">try</span>(<span class="tactic">destruct</span> <span class="id"><a href="bpf.comm.rBPFMonadOp.html#upd_reg">upd_reg</a></span>; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct_if_reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_opcode_branch">DxInstructions.get_opcode_branch</a></span>, <span class="id">DxNat.nat8_0x05</span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#upd_pc">DxMonad.upd_pc</a></span>, <span class="id">DxNat.nat8_0x85</span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#_bpf_get_call">DxMonad._bpf_get_call</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#cmp_ptr32_nullM">DxMonad.cmp_ptr32_nullM</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#exec_function">DxMonad.exec_function</a></span>, <span class="id">DxNat.nat8_0x95</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_offset">get_offset</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_immediate">get_immediate</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#eval_immediate">eval_immediate</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#step_opcode_branch">step_opcode_branch</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_opcode_branch">get_opcode_branch</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.monadicmodel.Opcode.html#byte_to_opcode_branch">byte_to_opcode_branch</a></span>; <span class="tactic">try</span> <span class="id">destruct_if_reflexivity</span>; <span class="tactic">try</span>(<span class="tactic">destruct</span> <span class="id"><a href="bpf.comm.rBPFMonadOp.html#upd_pc">upd_pc</a></span>; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_immediate">get_immediate</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#step_opcode_mem_ld_imm">step_opcode_mem_ld_imm</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_opcode_mem_ld_imm">get_opcode_mem_ld_imm</a></span>; <span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.monadicmodel.Opcode.html#byte_to_opcode_mem_ld_imm">byte_to_opcode_mem_ld_imm</a></span>; <span class="tactic">try</span> <span class="id">destruct_if_reflexivity</span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_opcode_mem_ld_reg">DxInstructions.get_opcode_mem_ld_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#check_mem">DxInstructions.check_mem</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#cmp_ptr32_nullM">DxMonad.cmp_ptr32_nullM</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#load_mem">DxMonad.load_mem</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_src">get_src</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_offset">get_offset</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_addr_ofs">get_addr_ofs</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#step_opcode_mem_ld_reg">step_opcode_mem_ld_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#is_well_chunk_bool">DxInstructions.is_well_chunk_bool</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_mrs_num">DxMonad.eval_mrs_num</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_mrs_regions">DxMonad.eval_mrs_regions</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#check_mem_aux">DxInstructions.check_mem_aux</a></span>, <span class="id"><a href="bpf.dxcomm.DxValues.html#valptr_null">DxValues.valptr_null</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_opcode_mem_ld_reg">get_opcode_mem_ld_reg</a></span>; <span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.comm.rBPFMonadOp.html#int64_to_src_reg">int64_to_src_reg</a></span>; [| <span class="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.monadicmodel.Opcode.html#byte_to_opcode_mem_ld_reg">byte_to_opcode_mem_ld_reg</a></span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_opcode_mem_st_imm">DxInstructions.get_opcode_mem_st_imm</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#check_mem">DxInstructions.check_mem</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#cmp_ptr32_nullM">DxMonad.cmp_ptr32_nullM</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#store_mem_imm">DxMonad.store_mem_imm</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_offset">get_offset</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_immediate">get_immediate</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_addr_ofs">get_addr_ofs</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#step_opcode_mem_st_imm">step_opcode_mem_st_imm</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#is_well_chunk_bool">DxInstructions.is_well_chunk_bool</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_mrs_num">DxMonad.eval_mrs_num</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_mrs_regions">DxMonad.eval_mrs_regions</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#check_mem_aux">DxInstructions.check_mem_aux</a></span>, <span class="id"><a href="bpf.dxcomm.DxValues.html#valptr_null">DxValues.valptr_null</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_opcode_mem_st_imm">get_opcode_mem_st_imm</a></span>; <span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.monadicmodel.Opcode.html#byte_to_opcode_mem_st_imm">byte_to_opcode_mem_st_imm</a></span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="bpf.dxmodel.DxInstructions.html#get_opcode_mem_st_reg">DxInstructions.get_opcode_mem_st_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#check_mem">DxInstructions.check_mem</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#cmp_ptr32_nullM">DxMonad.cmp_ptr32_nullM</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#store_mem_reg">DxMonad.store_mem_reg</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_src">get_src</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_offset">get_offset</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_addr_ofs">get_addr_ofs</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#step_opcode_mem_st_reg">step_opcode_mem_st_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#is_well_chunk_bool">DxInstructions.is_well_chunk_bool</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_mrs_num">DxMonad.eval_mrs_num</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_mrs_regions">DxMonad.eval_mrs_regions</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#check_mem_aux">DxInstructions.check_mem_aux</a></span>, <span class="id"><a href="bpf.dxcomm.DxValues.html#valptr_null">DxValues.valptr_null</a></span>, <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#get_opcode_mem_st_reg">get_opcode_mem_st_reg</a></span>; <span class="id">unfold_dx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.comm.rBPFMonadOp.html#int64_to_src_reg">int64_to_src_reg</a></span>; [| <span class="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="bpf.monadicmodel.Opcode.html#byte_to_opcode_mem_st_reg">byte_to_opcode_mem_st_reg</a></span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="equivalence_between_coq_and_dx_aux">equivalence_between_coq_and_dx_aux</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#bpf_interpreter_aux">rBPFInterpreter.bpf_interpreter_aux</a></span> <span class="id">f</span> = <span class="id"><a href="bpf.dxmodel.DxInstructions.html#bpf_interpreter_aux">DxInstructions.bpf_interpreter_aux</a></span> <span class="id">f</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#bpf_interpreter_aux">rBPFInterpreter.bpf_interpreter_aux</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#bpf_interpreter_aux">DxInstructions.bpf_interpreter_aux</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.dxmodel.DxMonad.html#bindM">DxMonad.bindM</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#upd_reg">DxMonad.upd_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_flag">DxMonad.eval_flag</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_reg">DxMonad.eval_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#returnM">DxMonad.returnM</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_ins_len">DxMonad.eval_ins_len</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_pc">DxMonad.eval_pc</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#upd_pc_incr">DxMonad.upd_pc_incr</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#upd_flag">DxMonad.upd_flag</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.dxcomm.DxIntegers.html#sint32_t">DxIntegers.sint32_t</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.dxcomm.DxIntegers.html#int32_0">DxIntegers.int32_0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="bpf.equivalence.equivalence2.html#equivalence_between_coq_and_dx_step">equivalence_between_coq_and_dx_step</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="equivalence_between_coq_and_dx_dx">equivalence_between_coq_and_dx_dx</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#bpf_interpreter">rBPFInterpreter.bpf_interpreter</a></span> <span class="id">f</span> = <span class="id"><a href="bpf.dxmodel.DxInstructions.html#bpf_interpreter">DxInstructions.bpf_interpreter</a></span> <span class="id">f</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.monadicmodel.rBPFInterpreter.html#bpf_interpreter">rBPFInterpreter.bpf_interpreter</a></span>, <span class="id"><a href="bpf.dxmodel.DxInstructions.html#bpf_interpreter">DxInstructions.bpf_interpreter</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="bpf.dxmodel.DxMonad.html#bindM">DxMonad.bindM</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#upd_reg">DxMonad.upd_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_flag">DxMonad.eval_flag</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#eval_reg">DxMonad.eval_reg</a></span>, <span class="id"><a href="bpf.dxmodel.DxMonad.html#returnM">DxMonad.returnM</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="bpf.equivalence.equivalence2.html#equivalence_between_coq_and_dx_aux">equivalence_between_coq_and_dx_aux</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="id">Close</span> <span class="kwd">Scope</span> <span class="id">Z_scope</span>.
</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
