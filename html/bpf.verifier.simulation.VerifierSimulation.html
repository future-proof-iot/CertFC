
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module VerifierSimulation</title>
<meta name="description" content="Documentation of Coq module VerifierSimulation" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module VerifierSimulation</h1>
<div class="coq">
<br/>
<div class="doc">Definition of matching relation between Coq and C representation </div>
<span class="kwd">From</span> <span class="id">bpf.comm</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="bpf.comm.MemRegion.html">MemRegion</a></span> <span class="id"><a href="bpf.comm.Regs.html">Regs</a></span> <span class="id"><a href="bpf.comm.Flag.html">Flag</a></span> <span class="id"><a href="bpf.comm.List64.html">List64</a></span>.<br/>
<span class="kwd">From</span> <span class="id">compcert</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html">Values</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html">AST</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.cfrontend.Clight.html">Clight</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html">Memory</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html">Memtype</a></span>.<br/>
<br/>
<span class="kwd">From</span> <span class="id">bpf.clightlogic</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="bpf.clightlogic.Clightlogic.html">Clightlogic</a></span>.<br/>
<span class="kwd">From</span> <span class="id">bpf.verifier.comm</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="bpf.verifier.comm.state.html">state</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith.html">ZArith</a></span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">Z_scope</span>.<br/>
<br/>
<span class="kwd">Global</span> <span class="kwd">Transparent</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.x86_32.Archi.html#ptr64">Archi.ptr64</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_list_ins">match_list_ins</a></span> (<span class="id">m</span>:<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#block">block</a></span>) (<span class="id">l</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#int64">int64</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span>, (0 &lt;= <span class="id">i</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">List.length</a></span> <span class="id">l</span>)%<span class="id">nat</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html#Mint64">AST.Mint64</a></span> <span class="id">m</span>  (<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> (8 * (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">i</span>)))) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vlong">Vlong</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nth">List.nth</a></span> <span class="id">i</span> <span class="id">l</span> <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_ins">match_ins</a></span> (<span class="id">ins_blk</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#block">block</a></span>) (<span class="id">st</span>: <span class="id"><a href="bpf.verifier.comm.state.html#state">state.state</a></span>) (<span class="id">m</span>:<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#mem">mem</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">List.length</a></span> (<span class="id"><a href="bpf.verifier.comm.state.html#ins">ins</a></span> <span class="id">st</span>) = (<span class="id"><a href="bpf.verifier.comm.state.html#ins_len">ins_len</a></span> <span class="id">st</span>) /\<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">List.length</a></span> (<span class="id"><a href="bpf.verifier.comm.state.html#ins">ins</a></span> <span class="id">st</span>)) * 8 &lt;= <span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> /\<br/>
&nbsp;&nbsp;<span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#match_list_ins">match_list_ins</a></span> <span class="id">m</span> <span class="id">ins_blk</span> (<span class="id"><a href="bpf.verifier.comm.state.html#ins">ins</a></span> <span class="id">st</span>).<br/>
<br/>
<br/>
<span class="kwd">Class</span> <span class="id"><a name="special_blocks">special_blocks</a></span> : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;{ <span class="id"><a name="st_blk">st_blk</a></span> : <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#block">block</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="ins_blk">ins_blk</a></span>  : <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#block">block</a></span> }.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="S">S</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">Blocks</span> : <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#special_blocks">special_blocks</a></span>}.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Record</span> <span class="id"><a name="match_state">match_state</a></span>  (<span class="id">st</span>: <span class="id"><a href="bpf.verifier.comm.state.html#state">state.state</a></span>) (<span class="id">m</span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#mem">mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="munchange">munchange</a></span>: <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">_</span> =&gt; <span class="id">b</span> &lt;&gt; <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#st_blk">st_blk</a></span> /\ <span class="id">b</span> &lt;&gt; <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#ins_blk">ins_blk</a></span>) (<span class="id"><a href="bpf.verifier.comm.state.html#bpf_m">bpf_m</a></span> <span class="id">st</span>) <span class="id">m</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="mins_len">mins_len</a></span> : <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html#Mint32">AST.Mint32</a></span> <span class="id">m</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#st_blk">st_blk</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> 0)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vint">Vint</a></span>  (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="bpf.verifier.comm.state.html#ins_len">ins_len</a></span> <span class="id">st</span>)))) /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="bpf.verifier.comm.state.html#ins_len">ins_len</a></span> <span class="id">st</span>) &gt;= 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="mins">mins</a></span>     : <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.AST.html#Mptr">AST.Mptr</a></span> <span class="id">m</span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#st_blk">st_blk</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> 4)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#ins_blk">ins_blk</a></span> (<span class="id"><a href="https://compcert.org/doc/html/compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> 0)) /\ <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#match_ins">match_ins</a></span> <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#ins_blk">ins_blk</a></span> <span class="id">st</span> <span class="id">m</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="mperm">mperm</a></span>    : <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m</span> <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#st_blk">st_blk</a></span> 0 8 <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Freeable">Freeable</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m</span> <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#ins_blk">ins_blk</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="bpf.verifier.comm.state.html#ins_len">ins_len</a></span> <span class="id">st</span>)) <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memtype.html#Readable">Readable</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="minvalid">minvalid</a></span> : (~<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> (<span class="id"><a href="bpf.verifier.comm.state.html#bpf_m">bpf_m</a></span> <span class="id">st</span>) <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#st_blk">st_blk</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> (<span class="id"><a href="bpf.verifier.comm.state.html#bpf_m">bpf_m</a></span> <span class="id">st</span>) <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#ins_blk">ins_blk</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#ins_blk">ins_blk</a></span> &lt;&gt; <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#st_blk">st_blk</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id">b</span> &lt;&gt; <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#st_blk">st_blk</a></span> /\ <span class="id">b</span> &lt;&gt; <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#ins_blk">ins_blk</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span> <span class="id">b</span> -&gt; <span class="id"><a href="https://compcert.org/doc/html/compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> (<span class="id"><a href="bpf.verifier.comm.state.html#bpf_m">bpf_m</a></span> <span class="id">st</span>) <span class="id">b</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="bpf.verifier.simulation.VerifierSimulation.html#S">S</a></span>.<br/>
<br/>
#[<span class="id">global</span>] <span class="kwd">Notation</span> <span class="id"><a name="dcons">dcons</a></span> := (<span class="id"><a href="bpf.clightlogic.Clightlogic.html#DList.DCons">DList.DCons</a></span> (<span class="id">F</span>:= <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span> -&gt; <span class="id"><a href="bpf.clightlogic.Clightlogic.html#Inv">Inv</a></span> <span class="id"><a href="bpf.verifier.comm.state.html#state">state.state</a></span>)).<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">split_conj</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| |- ?<span class="id">X</span> &lt;&gt; ?<span class="id">Y</span> /\ <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">intro</span> <span class="id">Hfalse</span>; <span class="tactic">inversion</span> <span class="id">Hfalse</span> | <span class="id">split_conj</span>]<br/>
&nbsp;&nbsp;| |- ?<span class="id">X</span> &lt;&gt; ?<span class="id">Y</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hfalse</span>; <span class="tactic">inversion</span> <span class="id">Hfalse</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
